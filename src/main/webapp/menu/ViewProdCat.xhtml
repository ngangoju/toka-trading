<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">
<h:body>

	<ui:composition template="/template/common/commonLayout.xhtml">

		<ui:define name="content">

			<h4 style="font: italic bold 13px/16px Georgia, serif;">
				#{loadUserInformationsController.users.userCategory.usercategoryName}
				<span class="glyphicon glyphicon-dashboard"> <label
					style="font: italic 13px/18px Georgia, serif">#{msg['message.com.user.dashaboard']}</label></span>
			</h4>
			<div style="border-bottom: 1.5px solid #91DBFA; margin-bottom: 6px;"></div>

			<p:outputPanel rendered="#{productController.rendered}">
				<div class="row" style="font: italic bold 13px/16px Georgia, serif;">
					<ui:repeat value="#{productController.branchCatList}" var="bList">
						<div class="col-md-4 col-sm-6">
							<div class="card-group">
								<div class="card" style="width: 300px">

									<h:graphicImage style="width:100%;margin: 5px"
										class="card-img-top" alt="Card image cap"
										value="/images/dynamic/?file=#{bList.documents.sysFilename}" />
									<div class="card-body">
										<h5 class="card-title">#{bList.prodCategory.productCatName}</h5>
										<p class="card-text">#{bList.productCount} products
											available.</p>
									</div>
									<div class="card-footer">
										<h:form>
											<h:commandLink value="#{msg['productlist.viewButton']}"
												class="btn btn-primary"
												action="#{productController.showproducts(bList)}" />
										</h:form>

									</div>
								</div>
							</div>
						</div>
					</ui:repeat>
				</div>
			</p:outputPanel>

			<!-- list of Products -->
			<p:outputPanel rendered="#{productController.renderDetails}">

				<div class=" col-md-12" style="height: 330px; overflow-y: scroll;">
					<h:form>
						<h:dataTable id="activityTable" binding="#{tabl}"
							style="font: italic 14px/18px Georgia, serif;box-sizing: border-box; width:100% !important;
       						 -webkit-box-shadow: none;
       							 box-shadow: none !important;
       								 margin: 17px 2px 0 !important;"
							value="#{productController.prodDto}" var="prod"
							class="table table-striped table-hover table-bordered tableUpdated ">
							<f:facet name="header">
								<h:commandLink data-toggle="tooltip" data-placement="left"
									value="#{msg['createProduct.editButton']}"
									style=" font: italic bold 13px/20px Georgia, serif;"
									class="btn btn-sm btn-info"
									action="#{productController.showProductForm()}">
									<f:ajax render="@all" execute="@all" onevent="showProgress" />
								</h:commandLink>
								<label
									style="margin-left: 35%; font: italic bold 13px/16px Georgia, serif;">#{msg['form.listproduct.table.title']}</label>
							</f:facet>

							<h:column>
								<f:facet name="header">
									<label>No</label>
								</f:facet>
								<br />
								<h:outputText value="#{tabl.rowIndex + 1}" />
							</h:column>
							<h:column>
								<f:facet name="header">
									<label>Product name</label>
								</f:facet>
								<br />
								<h:inputText id="prodId1" value="#{prod.productName}"
									styleClass="form-control" size="10" rendered="#{prod.editable}"
									maxlength="250" required="true"
									requiredMessage="#{msg['required.productname.message']}"
									converterMessage="#{msg['error.enter.invalid.productname']}"
									validatorMessage="#{msg['error.enter.invalid.productname']}">
									<f:validateRegex
										pattern="#{regex['regex.validation.message.VALID.FIRST_NAME']}"></f:validateRegex>
									<f:validateLength maximum="100"></f:validateLength>
								</h:inputText>
								<h:message for="prodId1" styleClass="help-block"></h:message>

								<h:outputText value="#{prod.productName}"
									rendered="#{not prod.editable}" />
							</h:column>
							<h:column>
								<f:facet name="header">
									<label>Quantity</label>
								</f:facet>
								<br />
								<h:inputText id="qty" value="#{prod.quantity}"
									styleClass="form-control" size="10" rendered="#{prod.editable}"
									maxlength="250"
									requiredMessage="#{msg['requiered.productqty.message']}"
									converterMessage="#{msg['error.enter.invalid.productqty']}"
									validatorMessage="#{msg['error.enter.invalid.productqty']}">
									<f:validateRegex
										pattern="#{regex['regex.validation.message.DIGITS_GRT_ZERO']}"></f:validateRegex>
									<f:validateLength maximum="100"></f:validateLength>
								</h:inputText>
								<h:message for="qty" styleClass="help-block"></h:message>

								<h:outputText value="#{prod.quantity}"
									rendered="#{not prod.editable}" />
							</h:column>
							<h:column>
								<f:facet name="header">
									<label>Unity price</label>
								</f:facet>
								<br />
								<h:inputText id="price" value="#{prod.purchaseUnitPrice}"
									styleClass="form-control" size="10" rendered="#{prod.editable}"
									maxlength="250" required="true"
									requiredMessage="#{msg['requiered.productunitprice.message']}"
									converterMessage="#{msg['error.enter.invalid.productunitprice']}"
									validatorMessage="#{msg['error.enter.invalid.productunitprice']}">
									<f:validateRegex
										pattern="#{regex['regex.validation.message.DIGITS_GRT_ZERO']}"></f:validateRegex>
									<f:validateLength maximum="100"></f:validateLength>
								</h:inputText>
								<h:message for="price" styleClass="help-block"></h:message>

								<h:outputText value="#{prod.purchaseUnitPrice}"
									rendered="#{not prod.editable}" />
							</h:column>
							<h:column>
								<f:facet name="header">
									<label>Category</label>
								</f:facet>
								<br />
								<h:selectOneMenu id="category" styleClass="form-control"
									rendered="#{prod.editable}"
									value="#{prod.productCategory.productCatid}"
									requiredMessage="#{msg['requiered.categoryname.message']}">
									<f:selectItem
										itemLabel="#{msg['common.message.select.PLACEHOLDER']}"
										itemValue="#{null}" escapeItem="true" itemDisabled="false" />
									<f:selectItems value="#{productController.categoryList}"
										var="option" itemValue="#{option.productCatid}"
										itemLabel="#{option.productCatName}" itemLabelEscaped="true" />

								</h:selectOneMenu>
								<h:message for="category" styleClass="help-block"></h:message>
								<h:outputText value="#{prod.productCategory.productCatName}"
									rendered="#{not prod.editable}" />

							</h:column>
							<h:column>
								<f:facet name="header">
									<label>Selling unit price</label>
								</f:facet>
								<br />
								<h:inputText id="saleprice" value="#{prod.sellingUnitPrice}"
									styleClass="form-control" size="10" rendered="#{prod.editable}"
									maxlength="250" required="true"
									requiredMessage="#{msg['requiered.saleunitprice.message']}"
									converterMessage="#{msg['error.enter.invalid.salesunitprice']}"
									validatorMessage="#{msg['error.enter.invalid.salesunitprice']}">
									<f:validateRegex
										pattern="#{regex['regex.validation.message.DIGITS_GRT_ZERO']}"></f:validateRegex>
									<f:validateLength maximum="100"></f:validateLength>
								</h:inputText>
								<h:message for="saleprice" styleClass="help-block"></h:message>

								<h:outputText value="#{prod.sellingUnitPrice}"
									rendered="#{not prod.editable}" />
							</h:column>
							<h:column>
								<f:facet name="header">
									<label>Manufact date</label>
								</f:facet>

								<p:outputPanel rendered="#{prod.editable}">
									<br />
									<div class="cols-md-12">
										<div class="input-group">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-calendar" aria-hidden="true"></i></span>
											<h:inputText locale="#{facesContext.viewRoot.locale}"
												rendered="#{prod.editable}" autocomplete="off"
												id="from_dob_date_idtable"
												binding="#{from_dob_date_idtable}" class="form-control"
												escape="true" value="#{prod.manufactDate}" maxlength="35"
												required="true"
												converterMessage="#{msg['validation.message.DATE_FORMAT']}"
												requiredMessage="#{msg['endDate.message']}">
												<f:convertDateTime type="date" dateType="short"
													pattern="dd/MM/yyyy" />
												<f:validateLength maximum="35" />
											</h:inputText>
											<script>
												$(function() {
													$(
															'input[id*="from_dob_date_idtable"]')
															.datepicker(
																	{
																		changeMonth : true,
																		changeYear : true,
																		//maxDate : 0,
																		//minDate: 0,
																		dateFormat : "dd/mm/yy",
																		//yearRange : "-100:+0",
																		buttonImage : "./resources/image/calendar1.png"
																	});
												});
											</script>
										</div>
									</div>
								</p:outputPanel>
								<br />
								<h:message errorClass="errorMsg1" for="from_dob_date_idtable"
									style="font-size:12px;font-family:Time New Roman;"></h:message>
								<h:outputText value="#{prod.manufactDate}"
									rendered="#{not prod.editable}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</h:column>
							<h:column>
								<f:facet name="header">
									<label>Expired date</label>
								</f:facet>
								<p:outputPanel rendered="#{prod.editable}">
									<br />
									<div class="cols-md-12">
										<div class="input-group">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-calendar" aria-hidden="true"></i></span>
											<h:inputText locale="#{facesContext.viewRoot.locale}"
												rendered="#{prod.editable}" autocomplete="off"
												id="from_dob_date_idtable2"
												binding="#{from_dob_date_idtable2}" class="form-control"
												escape="true" value="#{prod.expireDate}" maxlength="35"
												required="true"
												converterMessage="#{msg['validation.message.DATE_FORMAT']}"
												requiredMessage="#{msg['endDate.message']}">
												<f:convertDateTime type="date" dateType="short"
													pattern="dd/MM/yyyy" />
												<f:validateLength maximum="35" />
											</h:inputText>
											<script>
												$(function() {
													$(
															'input[id*="from_dob_date_idtable2"]')
															.datepicker(
																	{
																		changeMonth : true,
																		changeYear : true,
																		//maxDate : 0,
																		//minDate: 0,
																		dateFormat : "dd/mm/yy",
																		//yearRange : "-100:+0",
																		buttonImage : "./resources/image/calendar1.png"
																	});
												});
											</script>
										</div>
									</div>
								</p:outputPanel>
								<br />
								<h:message errorClass="errorMsg1" for="from_dob_date_idtable2"
									style="font-size:12px;font-family:Time New Roman;"></h:message>
								<h:outputText value="#{prod.expireDate}"
									rendered="#{not prod.editable}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</h:column>

							<h:column>
								<f:facet name="header">
									<label>Action</label>
								</f:facet>
								<div class="btn-group btn btn-sm" role="group"
									aria-label="Basic example" style="margin-top: 5%;">
									<h:commandLink style="color:white" data-toggle="tooltip"
										data-placement="left" title="#{msg['productView.viewButton']}"
										class="btn btn-sm btn-info glyphicon glyphicon-list"
										action="#{productController.viewDetails(prod)}"
										rendered="#{not prod.editable}">
										<!-- <f:ajax render="@form" execute="@form"
												onevent="showProgress" /> -->
									</h:commandLink>
								</div>
							</h:column>
							<f:facet name="footer">

							</f:facet>
						</h:dataTable>

					</h:form>
				</div>
			</p:outputPanel>
			<!-- 			end of products list -->
			
						<!-- END OF ACTIVITIES VIEW -->
						<p:outputPanel rendered="#{productController.renderproduct}"
							autoUpdate="true">
							<div class="card border-secondary mb-3 text-center"
								style="width: 25rem; margin-left: 25%">
								<div class="card-header">#{productController.uploadingFiles.product.productName}</div>
								<div class="card-body">
									<h5 class="card-title">
										<h:graphicImage style="width:30%;height:30%;margin:5px"
											class="img-xs rounded-circle" alt="productImage"
											value="/images/dynamic/?file=#{productController.uploadingFiles.documents.sysFilename}" />
									</h5>
									<p class="card-text"
										style="font: italic 13px/16px Georgia, serif;">
										Product category:<label class=" text text-black">#{productController.uploadingFiles.product.productCategory.productCatName}</label>
									</p>
									<p class="card-text"
										style="font: italic 13px/16px Georgia, serif;">
										Price:<label class=" text text-black">#{productController.salesprice}</label>
									</p>
									<p class="card-text"
										style="font: italic 13px/16px Georgia, serif;">
										Product Address:<label class=" text text-black">#{productController.uploadingFiles.product.productCategory.branch.branchName}</label>
									</p>
									<a
										href="#{loadUserInformationsController.getContextPath()}/menu/ViewProdCat.xhtml"
										class="btn btn-primary">Go back</a>
									<h:commandButton
										class="btn btn-outline-success" value="Order" action="#{productController.viewDetails(productController.uploadingFiles.product)}"/>
								</div>
							</div>
						</p:outputPanel>
<!-- 						End of product details -->

		</ui:define>
	</ui:composition>

</h:body>

</html>